# SketchUp API Documentation Generator

Automated pipeline for generating AI-ready documentation from the SketchUp Ruby API stubs repository.

## Overview

This project generates Markdown documentation from the official SketchUp Ruby API stubs, optimized for use with Claude Code and other AI assistants. Instead of HTML documentation, it produces:

- **Markdown files** - One file per class/module, human and AI-readable
- **INDEX.md** - Concise overview for quick navigation (designed for Claude Code)
- **CSV index** - Searchable metadata (generated by yard-markdown)

## Requirements

- Ruby 2.7 or higher
- Bundler
- Git (for submodule management)

## Setup

### 1. Initialize the SketchUp API Stubs Submodule

```bash
cd docgen
git submodule add https://github.com/SketchUp/ruby-api-stubs.git sketchup-api-stubs
git submodule update --init --recursive
```

Or if the submodule is already configured:

```bash
git submodule update --init --recursive
```

### 2. Install Dependencies

```bash
bundle install
```

## Usage

### Generate Documentation

Run the generation script:

```bash
./scripts/generate_docs.sh
```

This will:
1. Clean previous output (`generated-sketchup-docs-md/`)
2. Generate Markdown documentation using YARD
3. Build `INDEX.md` for quick navigation

### Output Structure

```
generated-sketchup-docs-md/
├── INDEX.md              # Concise overview for Claude Code
├── index.csv             # Searchable metadata (from yard-markdown)
├── Sketchup/
│   ├── Model.md
│   ├── Entity.md
│   └── ...
├── Geom/
│   ├── Point3d.md
│   └── ...
└── ...
```

## Updating SketchUp API Version

To update to the latest SketchUp API version:

```bash
cd sketchup-api-stubs
git pull origin main
cd ..
./scripts/generate_docs.sh
```

To pin to a specific version:

```bash
cd sketchup-api-stubs
git checkout <tag-or-commit>
cd ..
./scripts/generate_docs.sh
```

## Using with Claude Code

The generated documentation is optimized for Claude Code workflow:

1. **Start with INDEX.md** - Claude reads this first to get an overview of available APIs
2. **Navigate to specific docs** - Based on the index, Claude loads only relevant MD files
3. **Efficient context usage** - Only load detailed documentation when needed

Example Claude Code prompt:
```
Read generated-sketchup-docs-md/INDEX.md to see available SketchUp APIs, then help me create a script that...
```

## Configuration

### .yardopts

YARD configuration file that specifies:
- Input paths (from `sketchup-api-stubs/` submodule)
- Output format (markdown)
- Plugins (yard-sketchup)
- Filters (no private APIs)

### Gemfile

Dependencies:
- `yard` - Documentation generation tool
- `yard-markdown` - Markdown output plugin
- `yard-sketchup` - SketchUp-specific YARD handlers

## Architecture

```
┌─────────────────────────────────────────┐
│ sketchup-api-stubs (git submodule)      │
│ - Official SketchUp Ruby API stubs      │
│ - YARD comments + pages                 │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│ YARD + yard-sketchup plugin             │
│ - Parse Ruby stubs                      │
│ - Extract documentation                 │
└────────────────┬────────────────────────┘
                 │
          ┌──────┴──────┐
          ▼             ▼
┌──────────────┐  ┌─────────────────┐
│ Markdown     │  │ INDEX.md        │
│ (yard-md)    │  │ (build_index.rb)│
└──────────────┘  └─────────────────┘
          │             │
          └──────┬──────┘
                 ▼
┌─────────────────────────────────────────┐
│ generated-sketchup-docs-md/                                │
│ - AI-ready documentation                │
│ - Optimized for Claude Code             │
└─────────────────────────────────────────┘
```

## Development

### Scripts

- **generate_docs.sh** - Main generation pipeline
- **build_index.rb** - Creates INDEX.md from YARD registry

### Customization

To modify the index format, edit `scripts/build_index.rb`. The script uses `YARD::Registry` to access all parsed documentation data.

To change YARD output settings, edit `.yardopts`.

## Troubleshooting

### Submodule not initialized

```
ERROR: sketchup-api-stubs submodule not found!
```

Solution:
```bash
git submodule update --init --recursive
```

### Missing gems

```
Could not find gem 'yard-markdown'
```

Solution:
```bash
bundle install
```

### YARD parsing errors

Check that the submodule is properly initialized and contains valid Ruby files:
```bash
ls -la sketchup-api-stubs/lib/sketchup-api-stubs/stubs/
```

## License

This documentation generator is part of the Supex project. The SketchUp Ruby API stubs are maintained by SketchUp/Trimble.
