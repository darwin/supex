#!/usr/bin/env bash

# MCP server wrapper for Claude Code integration
# Logging handled by server.py to $SUPEX_WORKSPACE/logs/supex-mcp.log

set -e

# Get supex project root (directory containing this script)
SUPEX_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Set SUPEX_WORKSPACE to current CWD if not already set
# This is the user's project directory when launched from Claude Code
export SUPEX_WORKSPACE="${SUPEX_WORKSPACE:-$(pwd)}"

# Run MCP server (stdout clean for MCP communication)
exec uv run --project "$SUPEX_ROOT/driver" supex-mcp
